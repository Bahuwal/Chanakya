# CAN Motor Configuration for Trajectory Matching Test

# Serial connection settings
serial_port: "/dev/ttyUSB0"  # Linux: /dev/ttyUSB0, macOS: /dev/cu.usbserial-*, Windows: COM3
baudrate: 921600

# Parameter port for reading motor feedback
param_port: "/dev/ttyUSB1"  # Linux: /dev/ttyUSB1, macOS: /dev/cu.usbserial-*, Windows: COM4

# Motor ID mapping (array index 0-9 to CAN motor ID)
# Index 0-4: Left leg (hip pitch, hip roll, hip yaw, knee, ankle)
# Index 5-9: Right leg (hip pitch, hip roll, hip yaw, knee, ankle)
motor_ids: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10]

# Motor position limits (radians) - EXACTLY matching Duke's motor_controller.py
# Duke's values from motor_controller.py lines 40-41
min_limit: [-0.7854, -1.2566, -0.3927, -0.3000, -0.6632, -0.7854, -1.2566, -0.6283, -1.0472, -0.6981]
max_limit: [0.7854, 1.2566, 0.6283, 1.0472, 0.6981, 0.7854, 1.2566, 0.3927, 0.3000, 0.6632]

# Motorevo motor parameter ranges
# Position range (radians) - as defined in Motor class
Q_MIN: -12.5
Q_MAX: 12.5

# Velocity range (rad/s)
DQ_MIN: -10.0
DQ_MAX: 10.0

# Torque range (Nm)
TAU_MIN: -50.0
TAU_MAX: 50.0

# Outer loop PD gains range
OKP_MIN: 0.0
OKP_MAX: 250.0
OKD_MIN: 0.0
OKD_MAX: 50.0

# Inner loop PID gains range (specific to Motorevo)
IKP_MIN: 0.0
IKP_MAX: 250.0
IKD_MIN: 0.0
IKD_MAX: 50.0
IKI_MIN: 0.0
IKI_MAX: 50.0

# Default control gains
default_kp: [35.0, 130.0, 120.0, 80.0, 120.0, 35.0, 130.0, 120.0, 80.0, 120.0] #60.0
default_kd: [10.0, 45.0, 45.0, 20.0, 22.0, 10.0, 45.0, 45.0, 20.0, 22.0]
default_ikp: [50, 50, 50, 50, 50, 50, 50, 50, 50, 50] #30.0
default_ikd: [0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01]
default_iki: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]

# Velocity for trajectory tracking (0.0 for position holding, non-zero for trajectory tracking)
default_vel: 0.0

# Default feed-forward torque per joint (for PTM mode)
# Set non-zero values for joints requiring gravity compensation
default_torque: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]

# Zero position offset (calibrated at startup)
# These values are updated by initialize_motor_pos_offset()
motor_pos_offset: [0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0, 0.0]

# Gear ratios (for torque calculations, matching Duke's setup)
gear_ratio: [18, 18, 18, 18, 10, 18, 18, 18, 18, 10]

# Default standing pose (from Duke's checkpoint/baseline/config.yaml)
# Robot's stable standing position used as reference
default_dof_pos: [0.0, 0.175, 0.1, 0.387, -0.213, 0.0, -0.175, -0.1, -0.387, 0.213]

# Ankle coupling: Set to true if ankle motor position depends on knee position
# Duke's robot has: motor_ankle = dof_ankle + dof_knee
ankle_coupling: false

# Control loop timing
control_dt: 0.005  # 200 Hz control loop
decimation: 4      # Publish every 4 control cycles (50 Hz)
